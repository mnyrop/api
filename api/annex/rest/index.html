<!DOCTYPE html>
<html lang='en'><head>
  <meta charset="utf-8">
  <title>
     RESTful Management of Source Images on a IIIF Server —  IIIF | International Image Interoperability Framework
  </title>
  <meta name="description" content="">
  <link rel="shortcut icon" href="">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/iiif-api/assets/css/style.css">
  <link rel="canonical" href="/iiif-api/api/annex/rest/" />
  <link rel="shortcut icon" type="image/jpg" href="/iiif-api/assets/favicon.ico"/>
</head>
<body><script src="/iiif-api/assets/js/deleteButton.js"></script>

<div class="iiif-notification message">
  <div class="message-header">
    <div class="container">
      <button class="delete"></button>
      <p class="title">This website design is in pre-beta.</p>
      <p class="subtitle">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      
        <a href="/iiif-api/">This is a test link</a>
      
      </p>
    </div>
  </div>
</div>






<section class="hero is-primary" style="">
  
  <div class="hero-head">
    <nav id="navbar" class="navbar is-transparent is-spaced">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://marii.info/iiif-website">
        <img src="/iiif-api/assets/images/logos/logo-sm.png" alt="IIIF logo" height="28">
        <span class="brand-title">International Image Interoperability Framework</span>
      </a>
      <div class="navbar-burger" data-target="navbar" onclick="document.querySelector('.navbar-menu').classList.toggle('is-active');">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <div class="navbar-menu">
      <div class="navbar-end">
            <a class="navbar-item" href="https://marii.info/iiif-website">Home</a>
          
            <a class="navbar-item" href="https://marii.info/iiif-website/demos">Demos</a>
          
            <a class="navbar-item" href="/iiif-api">News & Events</a>
          
            <div class="navbar-item has-dropdown is-hoverable">
              <a  class="navbar-link"  href="https://marii.info/iiif-website/get-involved">
                Get Involved
              </a>
              <div class="navbar-dropdown is-boxed is-active">
                
                  <a class="navbar-item" href="https://marii.info/iiif-website/community/groups">Community Groups</a>
                
                  <a class="navbar-item" href="https://marii.info/iiif-website/community/consortium">Consortium</a>
                
                  <a class="navbar-item" href="https://marii.info/iiif-website/newsletter">Join Newsletter</a>
                
                  <a class="navbar-item" href="https://marii.info/iiif-website/community/consortium/staff/">Contact Us</a>
                
              </div>
            </div>
          
            <div class="navbar-item has-dropdown is-hoverable">
              <a  class="navbar-link"  href="https://marii.info/iiif-website/get-started">
                Get Started
              </a>
              <div class="navbar-dropdown is-boxed is-active">
                
                  <a class="navbar-item" href="https://marii.info/iiif-website/how-iiif-works">How IIIF Works</a>
                
                  <a class="navbar-item" href="https://marii.info/iiif-api/api/">APIs & Documentation</a>
                
                  <a class="navbar-item" href="https://marii.info/iiif-website/get-started/cookbook">Cookbooks</a>
                
                  <a class="navbar-item" href="https://marii.info/iiif-website/get-started/training">Training</a>
                
              </div>
            </div>
          </div>
    </div>
  </div>
</nav>

  </div>
  

  <div class="hero-body container">

    
    <nav class="breadcrumb is-centered" aria-label="breadcrumbs">
      <ul>
        
          <li><a href="/iiif-api/get-started">Get Started</a></li>
        
          <li><a href="/iiif-api/api">APIs & Documentation</a></li>
        
      </ul>
    </nav>
    

    <div class="container has-text-centered">
      
      <h1 class="title is-size-2 is-size-3-mobile is-size-desktop is-size-1-widescreen">RESTful Management of Source Images on a IIIF Server</h1>
      
      <p class="subtitle is-size-5"></p>

      
    </div>
  </div>
</section>
<section id="main">
      
      

<div class="container-block is-max-widescreen">
  <div class="columns container">
    <aside class="column is-one-quarter" markdown="1">
      <div class="box toc-sidebar sticky">
        <ul class="menu" id="toc-menu"><li><a href="#overview">1. Overview</a></li><li><a href="#authorization-authentication-and-security">5. Authorization, Authentication and Security</a></li></ul>

      </div>
    </aside>
    <div class="column content is-three-quarters api-content" markdown="1">
      <h2 class="no_toc" id="status-of-this-document">
        
        
          Status of this Document <a href="#status-of-this-document">#</a>
        
        
      </h2>
    

<p>This document is a DRAFT.  The contents should only be used for experimental purposes and not considered final.</p>

<p>This document is not subject to semantic versioning.
Changes will be tracked within the document.</p>

<p><strong>Editors</strong></p>

<ul class="names">
  <li><strong><a href="https://orcid.org/0000-0003-4441-6852">Robert Sanderson</a></strong> <a href="https://orcid.org/0000-0003-4441-6852"><img src="/iiif-api/img/orcid_16x16.png" alt="ORCID iD" /></a>, <a href="http://www.getty.edu/"><em>J. Paul Getty Trust</em></a></li>
  <li><strong><a href="https://orcid.org/0000-0002-0367-1243">Jon Stroop</a></strong> <a href="https://orcid.org/0000-0002-0367-1243"><img src="/iiif-api/img/orcid_16x16.png" alt="ORCID iD" /></a>, <a href="https://library.princeton.edu/"><em>Princeton University Library</em></a></li>
  <li><strong><a href="https://orcid.org/0000-0002-7970-7855">Simeon Warner</a></strong> <a href="https://orcid.org/0000-0002-7970-7855"><img src="/iiif-api/img/orcid_16x16.png" alt="ORCID iD" /></a>, <a href="https://www.cornell.edu/"><em>Cornell University</em></a></li>
</ul>

<p><em>Copyright © 2012-2021 Editors and contributors. Published by the <abbr title="International Image Interoperability Framework">IIIF</abbr> Consortium under the <a href="http://creativecommons.org/licenses/by/4.0/" title="Creative Commons &mdash; Attribution 4.0 International">CC-BY</a> license, see <a href="/iiif-api/api/annex/notes/disclaimer/">disclaimer</a>.</em></p>
      <h2 class="no_toc" id="abstract">
        
        
          Abstract <a href="#abstract">#</a>
        
        
      </h2>
    

<p>This document describes an extension to the <a href="/iiif-api/api/image/."><abbr title="International Image Interoperability Framework">IIIF</abbr> Image <abbr title="Application Programming Interface">API</abbr></a> which compliant servers may implement to faciliate the management of images on a server using the <abbr title="Hypertext Transfer Protocol">HTTP</abbr> protocol.</p>

<p>Please send feedback to <a href="mailto:iiif-discuss@googlegroups.com">iiif-discuss@googlegroups.com</a>.</p>
      <h2 id="overview">
        
        
          1. Overview <a href="#overview">#</a>
        
        
      </h2>
    

<p>There are cases where it is useful for a client to store, update or delete images on a <abbr title="International Image Interoperability Framework">IIIF</abbr> compliant image server without having access to that server’s file system. For example:</p>

<ol>
  <li>
    <p>A scholar who wants to drag and drop one of their own images into a web application for analysis along side other images already in that environment.</p>
  </li>
  <li>
    <p>A digital repository that ingests images into its storage environment, but creates an access copy or derivative on a <abbr title="International Image Interoperability Framework">IIIF</abbr> server as part of an automated workflow to support <abbr title="International Image Interoperability Framework">IIIF</abbr> client access.</p>
  </li>
  <li>
    <p>The <abbr title="International Image Interoperability Framework">IIIF</abbr> Image <abbr title="Application Programming Interface">API</abbr> does not define a mechanism for getting the source image that the <abbr title="Application Programming Interface">API</abbr> calls are using to derive images according to the request. In some cases this may be available as:</p>

    <script src="/iiif-api/assets/js/copyCodeBlock.js"></script>
  </li>
</ol>

<div class="code-header">
    <button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"></button>
</div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    {scheme}://{server}{/prefix}/{identifier}/full/full/0/native
    ```

    but the format can not be known, and furthermore the source image may not be in a format that the server can derive through regular requests.

## 2. Requests
{: #requests}

This document aims to follow the [REST style of architecture][fielding-rest], as commonly implemented in HTTP. There is one deviation from this approach, which is that rather than using the [OPTIONS][http-options] method or the [Access-Control-Allow-Methods][http-access-control-allow-methods] header to describe which methods the server supports, the a client should request the server's capabilities document, as described in the [Image API][image-api].

The predicates that should be used to indicate which methods are supported are defined in [Section 4][4].

The headers required by each request and response should follow [Section 14 of the HTTP Specification][http-headers]. Additional requirements and options are described below.

### 2.1 GET
{: #get}

The server should return the image that it uses make derivative images in response to regular API calls. Note that there is no guarantee that this is identical to the image that was originally PUT or POSTed to the server. The server MAY return 304 (Not Modified) if the server supports caching and the appropriate request headers were supplied.

URI Pattern:

&lt;script src="/iiif-api/assets/js/copyCodeBlock.js"&gt;&lt;/script&gt;
&lt;div class="code-header"&gt;
    &lt;button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"&gt;&lt;/button&gt;
&lt;/div&gt;

</code></pre></div></div>
<p>{scheme}://{server}{/prefix}/{identifier}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Relevant Headers:

| Header                    | Request/Response | Required | Description |
| ------------------------- | -----------------| -------- | ----------- |
| [Content-Type][http-content-type] | Request  | yes | The Media Type for the image. |

The server MUST return the image in a single format from this URI. It MAY either ignore any Accept header included in request, or return a 406 (Not Acceptable) status in response to an attempt to content-negotiate.

### 2.2 HEAD
{: #head}

The request should behave exactly the same as GET, except that only the appropriate response code and headers should be returned. There MUST NOT be a response body. This is useful to a client that needs to know, for example, whether an image with the supplied URI exists on the server, the format of that image, or when it was last modified.

URI Pattern:

&lt;script src="/iiif-api/assets/js/copyCodeBlock.js"&gt;&lt;/script&gt;
&lt;div class="code-header"&gt;
    &lt;button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"&gt;&lt;/button&gt;
&lt;/div&gt;

</code></pre></div></div>
<p>{scheme}://{server}{/prefix}/{identifier}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### 2.3 PUT
{: #put}

&gt; TODO: what happens if the identifier uses chars the API doesn't allow? This is why we return a Location header, but is it OK to change it? Functionally, it should be OK as long as the resolver implementation changes the identifier in the exact same way.

Update an existing image or create a new image with {identifier}.

URI Pattern:

&lt;script src="/iiif-api/assets/js/copyCodeBlock.js"&gt;&lt;/script&gt;
&lt;div class="code-header"&gt;
    &lt;button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"&gt;&lt;/button&gt;
&lt;/div&gt;

</code></pre></div></div>
<p>{scheme}://{server}{/prefix}/{identifier}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Relevant Headers:

| Header                    | Request/Response | Required | Description |
| ------------------------- | -----------------| -------- | ----------- |
| [Location][http-location] | Response         | yes      | The new Base URI for the image. |
| [Content-MD5][http-content-md5] | Response   | yes      | As a verification that the image was received intact. |
| [Content-Type][http-content-type] | Request  | yes      | The Media Type for the image. |
| [If-None-Match][http-if-none-match] | Request | no | Makes the PUT conditional. |

The response body MAY contain the info.json that was extracted from the image, but it MUST NOT redirect to the info URI as the Location header the MUST contain the Base URI of the of the newly stored image.

### 2.4 POST
{: #post}

Similar to PUT, except that the server will supply the identifier, and return it as part of the Location header.

URI Pattern:

&lt;script src="/iiif-api/assets/js/copyCodeBlock.js"&gt;&lt;/script&gt;
&lt;div class="code-header"&gt;
    &lt;button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"&gt;&lt;/button&gt;
&lt;/div&gt;

</code></pre></div></div>
<p>{scheme}://{server}{/prefix}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Relevant Headers:

| Header                    | Request/Response | Required | Description |
| ------------------------- | -----------------| -------- | ----------- |
| [Location][http-location] | Response | yes | The new Base URI for the image. |
| [Content-MD5][http-content-md5] | Response | yes | As a verification that the image was received intact. |
| [Content-Type][http-content-type] | Request | yes | The Media Type for the image. |

### 2.5 DELETE
{: #delete}

Delete the image specified by {identifier} on the server.

URI Pattern:

&lt;script src="/iiif-api/assets/js/copyCodeBlock.js"&gt;&lt;/script&gt;
&lt;div class="code-header"&gt;
    &lt;button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"&gt;&lt;/button&gt;
&lt;/div&gt;

</code></pre></div></div>
<p>{scheme}://{server}{/prefix}/{identifier}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
There are no special requirements for the HTTP headers associated with a DELETE request.

## 3. Response Codes
{: #response-codes}

In addition to the error conditions discussed in the API documents, the following codes are likely to be relevant. Implementations may find additional codes useful to their applications.

### 3.1 Successful Requests
{: #successful-requests}

| Response Code  | Description |
| -------------- | ----------- |
| 200 OK         | For GET, HEAD requests when the resource exists. |
| 201 Created    | For PUT or POST requests, when the image was successfully stored on the server. |
| 204 No Content | For DELETE requests. 204 MUST be used. Do NOT use 200. |

### 3.2 Error Conditions
{: #error-conditions}

| Error Code                   | Description                                   |
| ---------------------------- | --------------------------------------------- |
| 401 Unauthorized             | See [Section 5][5]. |
| 403 Forbidden                | See [Section 5][5]. |
| 404 Not Found                | For GETs and DELETES when the URI does not resolve to an image. |
| 405 Method Not Allowed       | See [Section 5][5]. |
| 413 Request Entity Too Large | Use for instances when the size of the image in a POST or PUT request is larger than the server will accept, if such a limit exists. |
| 415 Unsupported Media Type   | The declared Content-Type is not one that the server supports, or the server can not extract technical metadata from the entity of the request based on the declared Content-Type |
| 501 Not Implemented          | The server does not support the request method |
| 503 Service Unavailable      | The server can not handle the request for some other reason. For example, it may be out of storge space |

## 4. Extension Context
{: #extension-context}

This extension defines five predicates in a separate context, one for each of the HTTP methods described in [Section 2][2]. A server that supports any of the HTTP methods as described by this document should modify its capabilities document to include this context, e.g., as follows:

&lt;script src="/iiif-api/assets/js/copyCodeBlock.js"&gt;&lt;/script&gt;
&lt;div class="code-header"&gt;
    &lt;button class="copy-button button is-small is-primary" aria-label="Copy code to clipboard"&gt;&lt;/button&gt;
&lt;/div&gt;

``` json-doc
{
  "@context" : [
    "http://iiif.io/api/image-api/context.json",
    "http://iiif.io/api/image/ext/rest.json"
  ],
  "@id" : "http://iiif.example.com/server",

  ...

  "http_delete" : "true",
  "http_get" : "false",
  "http_head" : "true",
  "http_post" : "false",
  "http_put" : "true"
}
</code></pre></div></div>

<p>If one or more of the predicates is missing, a client MUST assume the method is not supported.</p>
      <h2 id="authorization-authentication-and-security">
        
        
          5. Authorization, Authentication and Security <a href="#authorization-authentication-and-security">#</a>
        
        
      </h2>
    

<p>As of this writing authorization and authentication are topics of heavy dicussion within the <abbr title="International Image Interoperability Framework">IIIF</abbr> community. This document will be revised as necessary, as the Image <abbr title="Application Programming Interface">API</abbr> specification evolves in this area.</p>

    </div>
  </div>
</div>

      
    </section>
<footer id="footer" class="footer">
  <div class="container">
    <div class="columns">

      <div class="navbar-brand column is-half">
        <a class="navbar-item" href="/iiif-api/">
          <img src="/iiif-api/assets/images/logos/logo-sm.png" alt="IIIF logo" height="28">
          <span class="brand-title blue-text">International Image Interoperability Framework</span>
        </a>
        <p>International Image Interoperability Framework: A community driven image framework with well defined APIs for making the world’s image repositories interoperable and accessible</p>
      </div>
      <div class="column"></div>
      
      <div class="column menu-column">
        <h4>About</h4>
        <ul>
        
          <li>
            <a href="https://marii.info/iiif-website/how-iiif-works">How IIIF Works</a>
          </li>
        
          <li>
            <a href="https://marii.info/iiif-api/api/">APIs & Documentation</a>
          </li>
        
          <li>
            <a href="https://marii.info/iiif-website/demos">Demos</a>
          </li>
        
          <li>
            <a href="https://guides.iiif.io">Tutorials</a>
          </li>
        
        </ul>
      </div>
      
      <div class="column menu-column">
        <h4>Stay Connected</h4>
        <ul>
        
          <li>
            <a href="/iiif-api">Events & News</a>
          </li>
        
          <li>
            <a href="https://marii.info/iiif-website/newsletter">Join Newsletter</a>
          </li>
        
          <li>
            <a href="https://marii.info/iiif-website/community/groups">Community Groups</a>
          </li>
        
          <li>
            <a href="https://marii.info/iiif-website/community/consortium">Consortium</a>
          </li>
        
        </ul>
      </div>
      
    </div>
  </div>
</footer>
</body>
</html>
